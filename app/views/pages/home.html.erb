<% provide(:title, "Pocetna") %>
<div class='row subheader'>
	<h1>Dobrodosli na PitamTe!</h1>
	<h4>Odaberite kategoriju i postavite pitanje - sacekajte odgovore i ocenite najbolji.</h4>
</div>

<% if notice %>
  <p class="alert alert-success"><%= notice %></p>
<% end %>
<% if alert %>
  <p class="alert alert-danger"><%= alert %></p>
<% end %>

<div class='container'>
	<div class='row'>
		
		<div class='col-sm-3'>
			<div class='panel panel-default categories-panel'>
			  <div class="panel-body">
			  	<h4>Kategorije</h4>
			    <ul class="categories">
			    	<li>
							<div class='row category selected' id="category-0">
								<hr />
						  	<span>Sva pitanja</span><i class="fa fa-chevron-right"></i>
						  </div>
						</li>
  					<%= render @categories %>
					</ul>
			  </div>
			</div>
		</div>
		<div class='col-sm-6 questions-panel'>
	    <div class='row questions-panel-header'>
		    <div class='col-sm-3 questions-panel-header-title'>
		    	<h4>Pitanja</h4>
		    </div>
		    <div class='col-sm-9'>
		    	<h4 class='questions-panel-header-category'>Sva pitanja</h4>
		    </div>
		  </div>
		  <div class='row'>
		  	<%= render 'questions/form' %>
	      <ul class="questions">
	        <%= render @questions %>
	      </ul>
	    </div>
		</div>
	</div>
</div>

<script>
	$(document).on( 'click', '.category', function() {
		$('.categories').children().children().removeClass('selected');
		$(this).toggleClass('selected');
		var id = $(this).attr('id').substr(9);
		$('#question_category_id').val(id);
		var cat = $(this).children().eq(1).text();
		$('.questions-panel-header-category').empty().html(cat);
		if (id == 0) {
			$('.question-form').addClass('hidden');
		}
		else {
			$('.question-form').removeClass('hidden');
		}
	});
</script>